{% extends "DreamCommerceObjectAuditBundle::layout.html.twig" %}

{% macro showValue(value) %}
    {% if value.date is defined %}
        {{ value|date('r') }}
    {% elseif value is iterable %}
        <ul>
        {% for element in value %}
            <li>{{ element }}</li>
        {% endfor %}
        </ul>
    {% else %}
        {{ value }}
    {% endif %}
{% endmacro %}

{% import _self as helper %}

{% block dream_commerce_object_audit_content %}
    <h1>{{ 'Comparing %resourceName% with identifier of %resourceId% between revisions %oldRevision% and %newRevision%'|trans({'%resourceName%': resourceName, '%resourceId%': resourceId, '%oldRevision%': oldRevision.id, '%newRevision%': newRevision.id}) }}</h1>

    <table>
        <thead>
            <tr>
                <th>{{ 'Field'|trans }}</th>
                <th>{{ 'Deleted'|trans }}</th>
                <th>{{ 'Same'|trans }}</th>
                <th>{{ 'Updated'|trans }}</th>
            </tr>
        </thead>
        <tbody>
            {% for field, value in diff %}
                <tr>
                    <td>{{ field }}</td>
                    <td>
                        {{ helper.showValue(value.old) }}
                    </td>
                    <td>
                        {{ helper.showValue(value.same) }}
                    </td>
                    <td>
                        {{ helper.showValue(value.new) }}
                    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock dream_commerce_object_audit_content %}
